<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xml:lang="en-US"
      lang="en-US"
        metal:use-macro="here/main_template/macros/master"
        i18n:domain="faq">

<metal:javascriptslot fill-slot="javascript_head_slot">
    <script type="text/javascript" tal:attributes="src string:${portal_url}/++resource++products.faq/javascript/jquery.listnav.js"></script>
    <script type="text/javascript" tal:attributes="src string:${portal_url}/++resource++products.faq/javascript/products.faq.js"></script>
</metal:javascriptslot>

<metal:cssslot fill-slot="style_slot">
    <link rel="stylesheet" type="text/css" tal:attributes="href string:${portal_url}/++resource++products.faq/css/faq.css" />
</metal:cssslot>

<body>
<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
            tal:define="kssClassesView context/@@kss_field_decorator_view;
            getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;">


        <tal:faq define="faqs python:context.getFolderContents(contentFilter={'portal_type' :['FaqEntry']}, full_objects=True);
                      items python:len(faqs);
                      DateTime python:modules['DateTime'].DateTime;
                      datenow python: DateTime();">




            <div id="faq-list-nav"></div>


            <div tal:replace="structure provider:plone.abovecontenttitle" />
            <h1 metal:use-macro="here/kss_generic_macros/macros/generic_title_view">
                Title or id
            </h1>

            <div tal:replace="structure provider:plone.belowcontenttitle" />

            <p metal:use-macro="here/kss_generic_macros/macros/generic_description_view">
                Description
            </p>

            <div tal:replace="structure provider:plone.abovecontentbody" />

            <button class="context faq-show-all" tal:attributes="onclick python:'toggle_all(%s)' % items">
                Toon Alles
            </button>

            <ol id="faq-list">
                <tal:entries tal:repeat="entry faqs">
                    <li tal:define="md python:DateTime(entry.ModificationDate()); delay here/delay;"
                            tal:attributes="id string:icon_${repeat/entry/number};">
                        <img i18n:attributes="title showhide_answer; alt showhide_answer"
                                title="Show or Hide answer"
                                alt="Show or Hide answer"
                                tal:attributes="src string:${portal_url}/++resource++products.faq/images/arrow.png"
                                class="toggle-button"
                                />

                        <a href="#" tal:content="entry/Title" class="faq-title">Title</a>
                        <img i18n:attributes="alt new; title new" class="new" alt="New" title="New"
                                                                  src="" tal:attributes="src string:$portal_url/new.gif"
                                tal:condition="python: (md + delay).toZone('GMT+2').greaterThan(datenow)"/>
                        <p class="faq_question" tal:content="entry/Description">Question</p>
                        <div class="faq_answer" tal:content="structure entry/getAnswer">Answer</div>
                    </li>
                </tal:entries>
            </ol>


            <div tal:repeat="folder python:here.getFolderContents(contentFilter={'portal_type' :['FaqFolder']}, full_objects=True)">
                <h2><a href="" tal:content="folder/Title"
                        tal:attributes="href string:${folder/absolute_url}">Folder title</a></h2>

                <p tal:condition="folder/Description|nothing" tal:content="folder/Description" />

                <dl tal:define="subentries python:folder.getFolderContents(contentFilter={'portal_type' :['FaqEntry']}, full_objects=True)" tal:condition="subentries">
                    <tal:entries repeat="subentry subentries">
                        <dt tal:define="md python:DateTime(subentry.ModificationDate());
                                delay here/delay;
                                        item repeat/subentry/index">
                            <img i18n:attributes="title showhide_answer" title="Show or Hide answer"
                                    tal:attributes="id string:icon_${item};
                                    onclick string:javascript:toggle('${item}');
                                    src string:${portal_url}/treeCollapsed.gif;
                                    onmouseover string:javascript:overLinkStyle('icon_${item}');
                                    onmouseout string:javascript:outLinkStyle('icon_${item}')" />
                            <img alt="Icon new" src=""
                                    tal:attributes="src string:$portal_url/new.gif"
                                    tal:condition="python: (md + delay).toZone('GMT+2').greaterThan(datenow)"/>
                            <a href="#" tal:content="subentry/Title" tal:attributes="href string:javascript:toggle('${item}');">Title</a>
                        </dt>
                        <dd class="faq_question" tal:content="subentry/Description">Question</dd>
                        <dd class="faq_answer" tal:attributes="id python:'faq_%s' % repeat['subentry'].index" tal:content="structure subentry/getAnswer" tal:on-error="nothing">
                            Answer
                        </dd>
                    </tal:entries>
                </dl>
            </div>
            <script type="text/javascript" tal:content="string:faq_items=${items};"></script>
        </tal:faq>
        <div tal:replace="structure provider:plone.belowcontentbody" />
    </tal:main-macro>
</metal:main>
</body>
</html>
